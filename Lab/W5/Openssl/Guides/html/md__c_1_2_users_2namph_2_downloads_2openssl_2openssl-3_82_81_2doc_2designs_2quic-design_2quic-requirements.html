<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Openssl Guides: QUIC Requirements</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Openssl Guides
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">QUIC Requirements</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>There have been various sources of requirements for the OpenSSL QUIC implementation. The following sections summarise the requirements obtained from each of these sources.</p>
<h1><a class="anchor" id="autotoc_md437"></a>
Original OMC Requirements</h1>
<p>The OMC have specified an initial set of requirements for QUIC as well as other requirements for the coming releases. The remainder of this section summarises the OMC requirements that were originally <a href="https://mta.openssl.org/pipermail/openssl-project/2021-October/002764.html">posted</a> and that were specific to QUIC</p>
<ul>
<li>The focus for the next releases is QUIC, with the objective of providing a fully functional QUIC implementation over a series of releases (2-3).</li>
<li>The current libssl record layer includes support for TLS, DTLS and KTLS. QUIC will introduce another variant and there may be more over time. The OMC requires a pluggable record layer interface to be implemented to enable this to be less intrusive, more maintainable, and to harmonize the existing record layer interactions between TLS, DTLS, KTLS and the planned QUIC protocols. The pluggable record layer interface will be internal only for MVP and be public in a future release.</li>
<li>The application must have the ability to be in control of the event loop without requiring callbacks to process the various events. An application must also have the ability to operate in “blocking” mode.</li>
<li>The QUIC implementation must include at least one congestion control algorithm. The fully functional release will provide the ability to plug in more implementations (via a provider).</li>
<li>The minimum viable product (MVP) for the next release is a pluggable record layer interface and a single stream QUIC client in the form of s_client that does not require significant API changes. In the MVP, interoperability should be prioritized over strict standards compliance.</li>
<li>The MVP will not contain a library API for an HTTP/3 implementation (it is a non-goal of the initial release). Our expectation is that other libraries will be able to use OpenSSL to build an HTTP/3 client on top of OpenSSL for the initial release.</li>
<li>Once we have a fully functional QUIC implementation (in a subsequent release), it should be possible for external libraries to be able to use the pluggable record layer interface and it should offer a stable ABI (via a provider).</li>
<li>The next major release number is intended to be reserved for the fully functional QUIC release (this does not imply we expect API breakage to occur as part of this activity - we can change major release numbers even if APIs remain compatible).</li>
<li>PR#8797 will not be merged and compatibility with the APIs proposed in that PR is a non-goal.</li>
<li>We do not plan to place protocol versions themselves in separate providers at this stage.</li>
<li>For the MVP a single interop target (i.e. the server implementation list):<ol type="1">
<li><a href="https://cloudflare-quic.com/">Cloudfare</a></li>
</ol>
</li>
<li>Testing against other implementations is not a release requirement for the MVP.</li>
</ul>
<h2><a class="anchor" id="autotoc_md438"></a>
Non-QUIC OpenSSL Requirements</h2>
<p>In addition to the QUIC requirements, the OMC also required that:</p>
<ul>
<li>The objective is to have shorter release timeframes, with releases occurring every six months.</li>
<li>The platform policy, covering the primary and secondary platforms, should be followed. (Note that this includes testing of primary and secondary platforms on project CI)</li>
</ul>
<h1><a class="anchor" id="autotoc_md439"></a>
OMC Blog post requirements</h1>
<p>The OMC additionally published a <a href="https://www.openssl.org/blog/blog/2021/11/25/openssl-update/">blog post</a> which also contained some requirements regarding QUIC. Statements from that blog post have been extracted, paraphrased and summarised here as requirements:</p>
<ul>
<li>The objective is to have APIs that allow applications to support any of our existing (or future) security protocols and to select between them with minimal effort.</li>
<li>In TLS/DTLS each connection represents a single stream and each connection is treated separately by our APIs. In the context of QUIC, APIs to be able to handle a collection of streams will be necessary for many applications. With the objective of being able to select which security protocol is used, APIs that encompass that capability for all protocols will need to be added.</li>
<li>The majority of existing applications operate using a single connection (i.e. effectively they are single stream in nature) and this fundamental context of usage needs to remain simple.</li>
<li>We need to enable the majority of our existing user’s applications to be able to work in a QUIC environment while expanding our APIs to enable future application usage to support the full capabilities of QUIC.</li>
<li>We will end up with interfaces that allow other QUIC implementations (outside of OpenSSL) to be able to use the TLS stack within OpenSSL – however that is not the initial focus of the work.</li>
<li>A long term supported core API for external QUIC library implementation usage in a future OpenSSL release will be provided.</li>
<li>Make it easy for our users to communicate securely, flexibly and performantly using whatever security protocol is most appropriate for the task at hand.</li>
<li>We will provide unified, consistent APIs to our users that work for all types of applications ranging from simple single stream clients up to optimised high performance servers</li>
</ul>
<h1><a class="anchor" id="autotoc_md440"></a>
Additional OTC analysis</h1>
<p>An OTC document provided the following analysis.</p>
<p>There are different types of application that we need to cater for:</p>
<ul>
<li>Simple clients that just do basic SSL_read/SSL_write or BIO_read/BIO_write interactions. We want to be able to enable them to transfer to using single stream QUIC easily. (MVP)</li>
<li>Simple servers that just do basic SSL_read/SSL_write or BIO_read/BIO_write interactions. We want to be able to enable them to transfer to using single stream QUIC easily. More likely to want to do multi-stream.</li>
<li>High performance applications (primarily server based) using existing libssl APIs; using custom network interaction BIOs in order to get the best performance at a network level as well as OS interactions (IO handling, thread handling, using fibres). Would prefer to use the existing APIs - they don’t want to throw away what they’ve got. Where QUIC necessitates a change they would be willing to make minor changes.</li>
<li>New applications. Would be willing to use new APIs to achieve their goals.</li>
</ul>
<h1><a class="anchor" id="autotoc_md441"></a>
Other requirements</h1>
<p>The following section summarises requirements obtained from other sources and discussions.</p>
<ul>
<li>The differences between QUIC, TLS, DTLS etc, should be minimised at an API level - the structure of the application should be the same. At runtime applications should be able to pick whatever protocol they want to use</li>
<li>It shouldn’t be harder to do single stream just because multi stream as a concept exists.</li>
<li>It shouldn’t be harder to do TLS just because you have the ability to do DTLS or QUIC.</li>
<li>Application authors will need good documentation, demos, examples etc.</li>
<li>QUIC performance should be comparable (in some future release - not MVP) with other major implementations and measured by a) handshakes per second b) application data throughput (bytes per second) for a single stream/connection</li>
<li><p class="startli">The internal architecture should allow for the fact that we may want to support "single copy" APIs in the future:</p>
<p class="startli">A single copy API would make it possible for application data being sent or received via QUIC to only be copied from one buffer to another once. The "single" copy allowed is to allow for the implicit copy in an encrypt or decrypt operation.</p>
<p class="startli">Single copy for sending data occurs when the application supplies a buffer of data to be sent. No copies of that data are made until it is encrypted. Once encrypted no further copies of the encrypted data are made until it is provided to the kernel for sending via a system call.</p>
<p class="startli">Single copy for receiving data occurs when a library supplied buffer is filled by the kernel via a system call from the socket. No further copies of that data are made until it is decrypted. It is decrypted directly into a buffer made available to (or supplied by) the application with no further internal copies made.</p>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md442"></a>
MVP Requirements (3.2)</h1>
<p>This section summarises those requirements from the above that are specific to the MVP.</p>
<ul>
<li>a pluggable record layer (not public for MVP)</li>
<li>a single stream QUIC client in the form of s_client that does not require significant API changes.</li>
<li>interoperability should be prioritized over strict standards compliance.</li>
<li>Single interop target for testing (cloudflare)</li>
<li>Testing against other implementations is not a release requirement for the MVP.</li>
<li>Support simple clients that just do basic SSL_read/SSL_write or BIO_read/BIO_write interactions. We want to be able to enable them to transfer to using single stream QUIC easily. (MVP) </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
