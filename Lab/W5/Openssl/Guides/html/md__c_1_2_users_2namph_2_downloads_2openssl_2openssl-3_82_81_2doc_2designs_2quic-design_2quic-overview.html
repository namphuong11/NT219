<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Openssl Guides: QUIC Design Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Openssl Guides
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">QUIC Design Overview</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The QUIC implementation in OpenSSL is roughly described by the following picture.</p>
<p><img src="images/quic-overview.svg" alt="alt_text" style="pointer-events: none;" title="QUIC Implementation Building Blocks" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md420"></a>
SSL API</h1>
<p>The application facing public API of the OpenSSL library.</p>
<h1><a class="anchor" id="autotoc_md421"></a>
Stream Send and Read Buffers</h1>
<p>Buffers for stream data to be sent or received from the peer over the QUIC protocol. These are necessary to support existing semantics of the SSL_read and SSL_write functions.</p>
<p>They will be bypassed with a single-copy API for read and write (<em>not for MVP</em>).</p>
<h1><a class="anchor" id="autotoc_md422"></a>
Frame in Flight Manager</h1>
<p>The frame in flight manager manages the queueing of frames which may need to be retransmitted if the packets in which they were transmitted were lost. It is <a class="el" href="md__c_1_2_users_2namph_2_downloads_2openssl_2openssl-3_82_81_2doc_2designs_2quic-design_2quic-fifm.html">discussed in more detail here.</a></p>
<h1><a class="anchor" id="autotoc_md423"></a>
Connection State Machine</h1>
<p>A state machine handling the state for a QUIC connection.</p>
<h1><a class="anchor" id="autotoc_md424"></a>
Connection ID Cache</h1>
<p>A table matching Connection IDs with Connection objects represented via SSL objects.</p>
<p><em>In MVP there is a many-to-1 matching of Connection IDs to Connection objects. Refer third paragraph in [5.1]</em></p>
<h1><a class="anchor" id="autotoc_md425"></a>
Timer And Event Queue</h1>
<p>Queue of events that need to be handled asynchronously or at a later time.</p>
<h1><a class="anchor" id="autotoc_md426"></a>
TLS Handshake Record Layer</h1>
<p>A module that uses the Record Layer API to implement the inner TLS-1.3 protocol handshake. It produces and parses the QUIC CRYPTO frames.</p>
<h1><a class="anchor" id="autotoc_md427"></a>
TX Packetizer</h1>
<p>This module creates frames from the application data obtained from the application. It also receives CRYPTO frames from the TLS Handshake Record Layer and ACK frames from the ACK Handling And Loss Detector subsystem.</p>
<h1><a class="anchor" id="autotoc_md428"></a>
RX Frame Handler</h1>
<p>Decrypted packets are split into frames here and the frames are forwarded either as data or as events to the subsequent modules based on the frame type. Flow Controller And Statistics Collector is consulted for decisions and to record the statistics of the received stream data.</p>
<h1><a class="anchor" id="autotoc_md429"></a>
Flow Controller</h1>
<p>This module is consulted by the TX Packetizer and RX Frame Handler for flow control decisions at both the stream and connection levels.</p>
<h1><a class="anchor" id="autotoc_md430"></a>
Statistics Collector</h1>
<p>This module maintains statistics about a connection, most notably the estimated round trip time to the remote peer.</p>
<h1><a class="anchor" id="autotoc_md431"></a>
QUIC Write Record Layer</h1>
<p>Encryption of packets according to the given encryption level and with the appropriate negotiated algorithm happens here.</p>
<p>Resulting packets are sent through the Datagram BIO interface to the network.</p>
<h1><a class="anchor" id="autotoc_md432"></a>
QUIC Read Record Layer</h1>
<p>Decryption of packets according to the given encryption level and with the appropriate negotiated algorithm happens here.</p>
<p>Packets are received from the network through the Datagram BIO interface.</p>
<h1><a class="anchor" id="autotoc_md433"></a>
Congestion Controller</h1>
<p>This is a pluggable API that provides calls to record data relevant for congestion control decisions and to query for decision on whether more data is allowed to be sent or not.</p>
<p>The module is called by the TX Packetizer and the ACK Handling And Loss Detector modules.</p>
<h1><a class="anchor" id="autotoc_md434"></a>
ACK Handling And Loss Detector</h1>
<p>A module that tracks packets sent to the peer and received ACK frames. It detects lost packets (after an ACK is not received in time). It informs TX packetizer that it can drop frames waiting to be ACKed when ACK is received. It also schedules retransmits of frames from packets that are considered to be lost.</p>
<p>The module also handles the receiving side - it schedules when ACK frames should be sent for the received packets.</p>
<h1><a class="anchor" id="autotoc_md435"></a>
Path And Conn Demultiplexer</h1>
<p>On server side this module is shared between multiple SSL connection objects which makes it a special kind of module. It dispatches the received packets to the appropriate SSL Connection by consulting the Connection ID Cache.</p>
<p><em>For client side and MVP this module just checks that the received packet has the appropriate Connection ID and optionally schedules sending stateless reset for packets with other Connection IDs.</em></p>
<h1><a class="anchor" id="autotoc_md436"></a>
Datagram BIO</h1>
<p>Implementation of BIO layer that supports <code>BIO_sendmmsg</code> and <code>BIO_recvmmsg</code> calls. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
