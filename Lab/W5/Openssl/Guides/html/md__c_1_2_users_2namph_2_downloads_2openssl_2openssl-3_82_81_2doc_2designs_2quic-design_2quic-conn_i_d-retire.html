<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Openssl Guides: QUIC Route Requirements</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Openssl Guides
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">QUIC Route Requirements</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>Two connection IDs &ndash; one local, one remote</li>
</ul>
<h1><a class="anchor" id="autotoc_md378"></a>
MVP</h1>
<p>MVP does most of one side of the CID management. The major outstanding items for a complete implementation are:</p>
<ul>
<li>possibly increase the number of CIDs we permit (from 2)</li>
<li>use more than the just latest CID for packet transmission<ul>
<li>round robin non-retired CIDs</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md379"></a>
Non zero Length Connection ID</h1>
<p>MVP does not issue multiple connection CIDs, instead it uses a zero length CID. To achieve this, more work is required:</p>
<ul>
<li>creation of new CIDs (coded but not used)</li>
<li>responding to new CIDs by returning new CIDs to peer match</li>
<li>managing the number of CIDs presented to our peer</li>
<li>limiting the number of CIDs issued &amp; retired</li>
<li>retirement of CIDs that are no longer being used</li>
<li>ensuring only one retire connection ID frame is in flight</li>
</ul>
<h1><a class="anchor" id="autotoc_md380"></a>
Connection Migration</h1>
<ul>
<li>Supporting migration goes well beyond CID management. The additions required to the CID code should be undertaken when/if connection migration is supported. I.e. do this later in a just in time manner.</li>
</ul>
<h1><a class="anchor" id="autotoc_md381"></a>
Retiring Connection ID</h1>
<p>When a remote asks to retire a connection ID (RETIRE_CONNECTION_ID) we have to:</p>
<ul>
<li>Send retirement acks for all retired CIDs</li>
<li>Immediately delete all CIDs and routes associated with these CIDs<ul>
<li>Retransmits use different route, so they are good.</li>
<li>Out of order delivery will initiate retransmits</li>
</ul>
</li>
<li>Should respond with a NEW_CONNECTION_ID frame if we are low on CIDs<ul>
<li>Not sure if it is mandatory to send a retirement.</li>
</ul>
</li>
</ul>
<p>When a remote creates a new connection ID:</p>
<ul>
<li>May respond with a new connection ID frame (it's a good idea)</li>
<li>It reads like the NEW_CONNECTION_ID frame can't be used to retire routes. However, see above. Suggest we accept either.</li>
</ul>
<p>When we want to retire one (or more) connection IDs we have to:</p>
<ul>
<li>Flag the route(s) as retired</li>
<li>Send a retirement frame (RETIRE_CONNECTION_ID)</li>
<li>Delete the connection(s) once they are retired by our peer (either NEW_CONNECTION_ID or RETIRE_CONNECTION_ID can do this)</li>
</ul>
<h1><a class="anchor" id="autotoc_md382"></a>
State</h1>
<ul>
<li>routes we've retired until they are acked as being retired (uint64_t max CID)</li>
<li>routes our peer has retired don't need tracking, we can remove immediately</li>
<li>retired routes where we've outstanding data to send will have that data sent before the retirement acks are send. If these fragments need to be retransmitted, they'll be done so using a new CID on a new route. This means, there is no requirement to wait for data to be flushed before sending the retirement ack. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
