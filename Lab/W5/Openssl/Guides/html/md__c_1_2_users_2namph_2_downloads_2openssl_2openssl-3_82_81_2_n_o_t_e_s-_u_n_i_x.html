<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Openssl Guides: Notes for UNIX-like platforms</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Openssl Guides
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Notes for UNIX-like platforms</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>For Unix/POSIX runtime systems on Windows, please see the <a class="el" href="md__c_1_2_users_2namph_2_downloads_2openssl_2openssl-3_82_81_2_n_o_t_e_s-_w_i_n_d_o_w_s.html">Notes for Windows platforms</a>.</p>
<h1><a class="anchor" id="autotoc_md893"></a>
OpenSSL uses the compiler to link programs and shared libraries</h1>
<p>OpenSSL's generated Makefile uses the C compiler command line to link programs, shared libraries and dynamically loadable shared objects. Because of this, any linking option that's given to the configuration scripts MUST be in a form that the compiler can accept. This varies between systems, where some have compilers that accept linker flags directly, while others take them in <code>-Wl,</code> form. You need to read your compiler documentation to figure out what is acceptable, and <code>ld(1)</code> to figure out what linker options are available.</p>
<h1><a class="anchor" id="autotoc_md894"></a>
Shared libraries and installation in non-default locations</h1>
<p>Every Unix system has its own set of default locations for shared libraries, such as <code>/lib</code>, <code>/usr/lib</code> or possibly <code>/usr/local/lib</code>. If libraries are installed in non-default locations, dynamically linked binaries will not find them and therefore fail to run, unless they get a bit of help from a defined runtime shared library search path.</p>
<p>For OpenSSL's application (the <code>openssl</code> command), our configuration scripts do NOT generally set the runtime shared library search path for you. It's therefore advisable to set it explicitly when configuring, unless the libraries are to be installed in directories that you know to be in the default list.</p>
<p>Runtime shared library search paths are specified with different linking options depending on operating system and versions thereof, and are talked about differently in their respective documentation; variations of RPATH are the most usual (note: ELF systems have two such tags, more on that below).</p>
<p>Possible options to set the runtime shared library search path include the following:</p>
<p>-Wl,-rpath,/whatever/path # Linux, *BSD, etc. -R /whatever/path # Solaris -Wl,-R,/whatever/path # AIX (-bsvr4 is passed internally) -Wl,+b,/whatever/path # HP-UX -rpath /whatever/path # Tru64, IRIX</p>
<p>OpenSSL's configuration scripts recognise all these options and pass them to the Makefile that they build. (In fact, all arguments starting with <code>-Wl,</code> are recognised as linker options.) Please note that 'l' in '-Wl' is lowercase L and not 1.</p>
<p>Please do not use verbatim directories in your runtime shared library search path! Some OpenSSL config targets add an extra directory level for multilib installations. To help with that, the produced Makefile includes the variable LIBRPATH, which is a convenience variable to be used with the runtime shared library search path options, as shown in this example:</p>
<p>$ ./Configure &ndash;prefix=/usr/local/ssl &ndash;openssldir=/usr/local/ssl \ '-Wl,-rpath,'</p>
<p>On modern ELF based systems, there are two runtime search paths tags to consider, <code>DT_RPATH</code> and <code>DT_RUNPATH</code>. Shared objects are searched for in this order:</p>
<ol type="1">
<li>Using directories specified in DT_RPATH, unless DT_RUNPATH is also set.</li>
<li>Using the environment variable LD_LIBRARY_PATH</li>
<li>Using directories specified in DT_RUNPATH.</li>
<li>Using system shared object caches and default directories.</li>
</ol>
<p>This means that the values in the environment variable <code>LD_LIBRARY_PATH</code> won't matter if the library is found in the paths given by <code>DT_RPATH</code> (and <code>DT_RUNPATH</code> isn't set).</p>
<p>Exactly which of <code>DT_RPATH</code> or <code>DT_RUNPATH</code> is set by default appears to depend on the system. For example, according to documentation, <code>DT_RPATH</code> appears to be deprecated on Solaris in favor of <code>DT_RUNPATH</code>, while on Debian GNU/Linux, either can be set, and <code>DT_RPATH</code> is the default at the time of writing.</p>
<p>How to choose which runtime search path tag is to be set depends on your system, please refer to ld(1) for the exact information on your system. As an example, the way to ensure the <code>DT_RUNPATH</code> is set on Debian GNU/Linux systems rather than DT_RPATH is to tell the linker to set new dtags, like this:</p>
<p>$ ./Configure &ndash;prefix=/usr/local/ssl &ndash;openssldir=/usr/local/ssl \ '-Wl,&ndash;enable-new-dtags,-rpath,'</p>
<p>It might be worth noting that some/most ELF systems implement support for runtime search path relative to the directory containing current executable, by interpreting <code>$ORIGIN</code> along with some other internal variables. Consult your system documentation.</p>
<h1><a class="anchor" id="autotoc_md895"></a>
Linking your application</h1>
<p>Third-party applications dynamically linked with OpenSSL (or any other) shared library face exactly the same problem with non-default locations. The OpenSSL config options mentioned above might or might not have bearing on linking of the target application. "Might" means that under some circumstances, it would be sufficient to link with OpenSSL shared library "naturally", i.e. with <code>-L/whatever/path -lssl -lcrypto</code>. But there are also cases when you'd have to explicitly specify runtime search path when linking your application. Consult your system documentation and use above section as inspiration...</p>
<p>Shared OpenSSL builds also install static libraries. Linking with the latter is likely to require special care because linkers usually look for shared libraries first and tend to remain "blind" to static OpenSSL libraries. Referring to system documentation would suffice, if not for a corner case. On AIX static libraries (in shared build) are named differently, add <code>_a</code> suffix to link with them, e.g. <code>-lcrypto_a</code>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
