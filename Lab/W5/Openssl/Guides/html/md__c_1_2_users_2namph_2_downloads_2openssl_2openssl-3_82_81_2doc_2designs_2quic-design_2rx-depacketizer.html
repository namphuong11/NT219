<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Openssl Guides: RX depacketizer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Openssl Guides
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">RX depacketizer</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This component takes a QUIC packet and parses the frames contained therein, to be forwarded to appropriate other components for further processing.</p>
<p>In the <a href="https://github.com/openssl/openssl/blob/master/doc/designs/quic-design/quic-overview.md">overview</a>, this is called the "RX Frame Handler". The name "RX
depacketizer" was chosen to reflect the kinship with the <a href="https://github.com/openssl/openssl/pull/18570">TX packetizer</a>.</p>
<h1><a class="anchor" id="autotoc_md461"></a>
Main structures</h1>
<h2><a class="anchor" id="autotoc_md462"></a>
Connection</h2>
<p>Represented by an <code>QUIC_CONNECTION</code> object, defined in <a href="../../../include/internal/quic_ssl.h"><code>include/internal/quic_ssl.h</code></a>.</p>
<h2><a class="anchor" id="autotoc_md463"></a>
Stream</h2>
<p>Represented by an <code>QUIC_STREAM</code> object (yet to be defined).</p>
<h2><a class="anchor" id="autotoc_md464"></a>
Packets</h2>
<p>Represented by the <code>OSSL_QRX_PKT</code> structure, defined in <code><a class="el" href="quic__record__rx_8h_source.html">include/internal/quic_record_rx.h</a></code> in <a href="https://github.com/openssl/openssl/pull/18949">QUIC Demuxer and Record Layer (RX+TX)</a>.</p>
<h1><a class="anchor" id="autotoc_md465"></a>
Interactions</h1>
<p>The RX depacketizer receives a packet from the QUIC Read Record Layer, and then processes frames in two phases:</p>
<ol type="1">
<li>Collect information for the ACK Manager</li>
<li>Pass frame data</li>
</ol>
<h2><a class="anchor" id="autotoc_md466"></a>
Other components</h2>
<p>There are a number of other components that the RX depacketizer wants to interact with:</p>
<ul>
<li><a href="https://github.com/openssl/openssl/pull/18564">ACK manager</a></li>
<li>Handshake manager, which is currently unspecified. It's assumed that this will wrap around what is called the "TLS Handshake Record Layer", in the <a href="https://github.com/openssl/openssl/blob/master/doc/designs/quic-design/quic-overview.md">overview</a></li>
<li>Session manager, which is currently unspecified for QUIC, but may very well be the existing <code>SSL_SESSION</code> functionality, extended to fit QUIC purposes.</li>
<li>Flow control, which is currently unspecified. In the <a href="https://github.com/openssl/openssl/blob/master/doc/designs/quic-design/quic-overview.md">overview</a>, it's called the "Flow Controller And Statistics Collector"</li>
<li>Connection manager, which is currently unspecified. In the <a href="https://github.com/openssl/openssl/blob/master/doc/designs/quic-design/quic-overview.md">overview</a>, there's a "Connection State Machine" that the "RX Frame Handler" isn't talking directly with, so it's possible that the Connection manager will turn out to be the Handshake manager.</li>
<li>Stream SSL objects, to pass the stream data to.</li>
</ul>
<h2><a class="anchor" id="autotoc_md467"></a>
Read and process a packet</h2>
<p>Following how things are designed elsewhere, the depacketizer is assumed to be called "from above" using the following function:</p>
<div class="fragment"><div class="line"> C</div>
<div class="line">__owur int ossl_quic_depacketize(QUIC_CONNECTION *connection);</div>
</div><!-- fragment --><p>This function would create an <code>OSSL_QRX_PKT</code> and call the QUIC Read Record Layer with a pointer to it, leaving it to the QUIC Read Record Layer to fill in the data.</p>
<p>This uses the <code>ossl_qrx_read_pkt()</code> packet reading function from <a href="https://github.com/openssl/openssl/pull/18949">QUIC Demuxer and Record Layer (RX+TX)</a>. (the <code>OSSL_QRX_PKT</code> structure / sub-structure needs to be extended to take an <code><a class="el" href="struct_o_s_s_l___t_i_m_e.html">OSSL_TIME</a></code>, possibly by reference, which should be filled in with the packet reception time)</p>
<h2><a class="anchor" id="autotoc_md468"></a>
Collect information for the <a href="https://github.com/openssl/openssl/pull/18564">ACK manager</a></h2>
<p>This collects appropriate data into a <code>QUIC_ACKM_RX_PKT</code> structure:</p>
<ul>
<li>The packet number (<code>packet-&gt;packet_number</code>)</li>
<li>The packet receive time (<code>received</code>)</li>
<li>The packet space, which is always:<ul>
<li><code>QUIC_PN_SPACE_INITIAL</code> when <code>packet-&gt;packet_type == pkt_initial</code></li>
<li><code>QUIC_PN_SPACE_HANDSHAKE</code> when <code>packet-&gt;packet_type == pkt_handshake</code></li>
<li><code>QUIC_PN_SPACE_APP</code> for all other packet types</li>
</ul>
</li>
<li>The ACK eliciting flag. This is calculated by looping through all frames and noting those that are ACK eliciting, as determined from Table 1 below)</li>
</ul>
<h2><a class="anchor" id="autotoc_md469"></a>
Passing frame data</h2>
<p>This loops through all the frames, extracts data where there is any and calls diverse other components as shown in the Passed to column in Table 1 below.</p>
<h3><a class="anchor" id="autotoc_md470"></a>
Table 1</h3>
<p>Taken from <a href="https://datatracker.ietf.org/doc/html/rfc9000#section-12.4">RFC 9000 12.4 Frames and Frame Types</a></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Passed to   </th><th class="markdownTableHeadNone">ACK eliciting   </th><th class="markdownTableHeadNone">I   </th><th class="markdownTableHeadNone">H   </th><th class="markdownTableHeadNone">0   </th><th class="markdownTableHeadNone">1    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x00   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.1">padding</a>   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x01   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.2">ping</a>   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x02   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.3">ack 0x02</a>   </td><td class="markdownTableBodyNone">[ACK manager] [^1]   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x03   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.3">ack 0x03</a>   </td><td class="markdownTableBodyNone">[ACK manager] [^1]   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x04   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.4">reset_stream</a>   </td><td class="markdownTableBodyNone">- [^2]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x05   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.5">stop_sending</a>   </td><td class="markdownTableBodyNone">- [^3]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x06   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.6">crypto</a>   </td><td class="markdownTableBodyNone">Handshake manager   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x07   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.7">new_token</a>   </td><td class="markdownTableBodyNone">Session manager   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x08   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.8">stream 0x08</a>   </td><td class="markdownTableBodyNone">Apprioriate stream [^4]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x09   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.8">stream 0x09</a>   </td><td class="markdownTableBodyNone">Apprioriate stream [^4]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x0A   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.8">stream 0x0A</a>   </td><td class="markdownTableBodyNone">Apprioriate stream [^4]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x0B   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.8">stream 0x0B</a>   </td><td class="markdownTableBodyNone">Apprioriate stream [^4]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x0C   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.8">stream 0x0C</a>   </td><td class="markdownTableBodyNone">Apprioriate stream [^4]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x0D   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.8">stream 0x0D</a>   </td><td class="markdownTableBodyNone">Apprioriate stream [^4]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x0E   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.8">stream 0x0E</a>   </td><td class="markdownTableBodyNone">Apprioriate stream [^4]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x0F   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.8">stream 0x0F</a>   </td><td class="markdownTableBodyNone">Apprioriate stream [^4]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x10   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.9">max_data</a>   </td><td class="markdownTableBodyNone">Flow control [^5]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x11   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.10">max_stream_data</a>   </td><td class="markdownTableBodyNone">Flow control [^5]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x12   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.11">max_streams 0x12</a>   </td><td class="markdownTableBodyNone">Connection manager? [^6]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x13   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.11">max_streams 0x13</a>   </td><td class="markdownTableBodyNone">Connection manager? [^6]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x14   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.12">data_blocked</a>   </td><td class="markdownTableBodyNone">Flow control [^5]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x15   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.13">stream_data_blocked</a>   </td><td class="markdownTableBodyNone">Flow control [^5]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x16   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.14">streams_blocked 0x16</a>   </td><td class="markdownTableBodyNone">Connection manager? [^6]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x17   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.14">streams_blocked 0x17</a>   </td><td class="markdownTableBodyNone">Connection manager? [^6]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x18   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.15">new_connection_id</a>   </td><td class="markdownTableBodyNone">Connection manager   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x19   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.16">retire_connection_id</a>   </td><td class="markdownTableBodyNone">Connection manager   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x1A   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.17">path_challenge</a>   </td><td class="markdownTableBodyNone">Connection manager? [^7]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x1B   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.18">path_response</a>   </td><td class="markdownTableBodyNone">Connection manager? [^7]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x1C   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.19">connection_close 0x1C</a>   </td><td class="markdownTableBodyNone">Connection manager   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x1D   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.19">connection_close 0x1D</a>   </td><td class="markdownTableBodyNone">Connection manager   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x1E   </td><td class="markdownTableBodyNone"><a href="https://datatracker.ietf.org/doc/html/rfc9000#section-19.20">handshake_done</a>   </td><td class="markdownTableBodyNone">Handshake manager   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">&amp;#10004;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">????   </td><td class="markdownTableBodyNone"><em>[Extension Frames]</em>   </td><td class="markdownTableBodyNone">- [^8]   </td><td class="markdownTableBodyNone">&amp;#10004;   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td></tr>
</table>
<p>The I, H, 0, and 1 columns are validity in different packet types, with this meaning:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Pkts   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">I   </td><td class="markdownTableBodyNone">Valid in Initial packets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">H   </td><td class="markdownTableBodyNone">Valid in Handshake packets    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyNone">Valid in 0-RTT packets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyNone">Valid in 1-RTT packets   </td></tr>
</table>
<p>Notes:</p>
<p>[^1]: This creates and populates an <code>QUIC_ACKM_ACK</code> structure, then calls <code>QUIC_ACKM_on_rx_ack_frame()</code>, with the appropriate context (<code>QUIC_ACKM</code>, the created <code>QUIC_ACKM_ACK</code>, <code>pkt_space</code> and <code>rx_time</code>) [^2]: Immediately terminates the appropriate receiving stream <code>QUIC_STREAM</code> object. This includes discarding any buffered application data. For a stream that's send-only, the error <code>STREAM_STATE_ERROR</code> is raised, and the <code>QUIC_CONNECTION</code> object is terminated. [^3]: Immediately terminates the appropriate sending stream <code>QUIC_STREAM</code> object. For a stream that's receive-only, the error <code>STREAM_STATE_ERROR</code> is raised, and the <code>QUIC_CONNECTION</code> object is terminated. [^4]: The frame payload (Stream Data) is passed as is to the <code>QUIC_STREAM</code> object, along with available metadata (offset and length, as determined to be available from the lower 3 bits of the frame type). [^5]: The details of what flow control will need are yet to be determined [^6]: I imagine that <code>max_streams</code> and <code>streams_blocked</code> concern a Connection manager before anything else. [^7]: I imagine that path challenge/response concerns a Connection manager before anything else. [^8]: We have no idea what extension frames there will be. However, we must at least acknowledge their presence, so much is clear from the RFC. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
