<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Openssl Guides: Using OpenSSL Tests</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Openssl Guides
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Using OpenSSL Tests</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>After a successful build, and before installing, the libraries should be tested. Run: </p><pre class="fragment">$ make test                                      # Unix
$ mms test                                       ! OpenVMS
$ nmake test                                     # Windows
</pre><p> <b>Warning:</b> you MUST run the tests from an unprivileged account (or disable your privileges temporarily if your platform allows it).</p>
<p>If some tests fail, take a look at the section Test Failures below.</p>
<h1><a class="anchor" id="autotoc_md987"></a>
Test Failures</h1>
<p>If some tests fail, look at the output. There may be reasons for the failure that isn't a problem in OpenSSL itself (like an OS malfunction or a Perl issue). You may want increased verbosity, that can be accomplished like this:</p>
<p>Full verbosity, showing full output of all successful and failed test cases (<code>make</code> macro <code>VERBOSE</code> or <code>V</code>): </p><pre class="fragment">$ make V=1 test                                  # Unix
$ mms /macro=(V=1) test                          ! OpenVMS
$ nmake V=1 test                                 # Windows
</pre><p> Verbosity on failed (sub-)tests only (<code>VERBOSE_FAILURE</code> or <code>VF</code> or <code>REPORT_FAILURES</code>): </p><pre class="fragment">$ make test VF=1
</pre><p> Verbosity on failed (sub-)tests, in addition progress on succeeded (sub-)tests (<code>VERBOSE_FAILURE_PROGRESS</code> or <code>VFP</code> or <code>REPORT_FAILURES_PROGRESS</code>): </p><pre class="fragment">$ make test VFP=1
</pre><p> If you want to run just one or a few specific tests, you can use the make variable TESTS to specify them, like this: </p><pre class="fragment">$ make TESTS='test_rsa test_dsa' test            # Unix
$ mms/macro="TESTS=test_rsa test_dsa" test       ! OpenVMS
$ nmake TESTS="test_rsa test_dsa" test           # Windows
</pre><p> And of course, you can combine (Unix examples shown): </p><pre class="fragment">$ make test TESTS='test_rsa test_dsa' VF=1
$ make test TESTS="test_cmp_*" VFP=1
</pre><p> You can find the list of available tests like this: </p><pre class="fragment">$ make list-tests                                # Unix
$ mms list-tests                                 ! OpenVMS
$ nmake list-tests                               # Windows
</pre><p> Have a look at the manual for the perl module Test::Harness to see what other HARNESS_* variables there are.</p>
<p>To report a bug please open an issue on GitHub, at <a href="https://github.com/openssl/openssl/issues">https://github.com/openssl/openssl/issues</a>.</p>
<p>For more details on how the <code>make</code> variables <code>TESTS</code> can be used, see section Running Selected Tests below.</p>
<h1><a class="anchor" id="autotoc_md988"></a>
Running Selected Tests</h1>
<p>The <code>make</code> variable <code>TESTS</code> supports a versatile set of space separated tokens with which you can specify a set of tests to be performed. With a "current
set of tests" in mind, initially being empty, here are the possible tokens: </p><pre class="fragment"> alltests      The current set of tests becomes the whole set of available
               tests (as listed when you do 'make list-tests' or similar).

 xxx           Adds the test 'xxx' to the current set of tests.

-xxx           Removes 'xxx' from the current set of tests.  If this is the
               first token in the list, the current set of tests is first
               assigned the whole set of available tests, effectively making
               this token equivalent to TESTS="alltests -xxx".

 nn            Adds the test group 'nn' (which is a number) to the current
               set of tests.

-nn            Removes the test group 'nn' from the current set of tests.
               If this is the first token in the list, the current set of
               tests is first assigned the whole set of available tests,
               effectively making this token equivalent to
               TESTS="alltests -xxx".
</pre><p> Also, all tokens except for "alltests" may have wildcards, such as *. (on Unix and Windows, BSD style wildcards are supported, while on VMS, it's VMS style wildcards)</p>
<h2><a class="anchor" id="autotoc_md989"></a>
Examples</h2>
<p>Run all tests except for the fuzz tests: </p><pre class="fragment">$ make TESTS='-test_fuzz*' test
</pre><p> or, if you want to be explicit: </p><pre class="fragment">$ make TESTS='alltests -test_fuzz*' test
</pre><p> Run all tests that have a name starting with "test_ssl" but not those starting with "test_ssl_": </p><pre class="fragment">$ make TESTS='test_ssl* -test_ssl_*' test
</pre><p> Run only test group 10: </p><pre class="fragment">$ make TESTS='10' test
</pre><p> Run all tests except the slow group (group 99): </p><pre class="fragment">$ make TESTS='-99' test
</pre><p> Run all tests in test groups 80 to 99 except for tests in group 90: </p><pre class="fragment">$ make TESTS='[89]? -90' test
</pre><p> To run specific fuzz tests you can use for instance: </p><pre class="fragment">$ make test TESTS='test_fuzz_cmp test_fuzz_cms'
</pre><p> To stochastically verify that the algorithm that produces uniformly distributed random numbers is operating correctly (with a false positive rate of 0.01%): </p><pre class="fragment">$ ./util/wrap.sh test/bntest -stochastic
</pre> <h1><a class="anchor" id="autotoc_md990"></a>
Running Tests in Parallel</h1>
<p>By default the test harness will execute the selected tests sequentially. Depending on the platform characteristics, running more than one test job in parallel may speed up test execution. This can be requested by setting the <code>HARNESS_JOBS</code> environment variable to a positive integer value. This specifies the maximum number of test jobs to run in parallel.</p>
<p>Depending on the Perl version different strategies could be adopted to select which test recipes can be run in parallel. In recent versions of Perl, unless specified otherwise, any task can be run in parallel. Consult the documentation for <code>TAP::Harness</code> to know more.</p>
<p>To run up to four tests in parallel at any given time: </p><pre class="fragment">$ make HARNESS_JOBS=4 test
</pre> <h1><a class="anchor" id="autotoc_md991"></a>
Random numbers in tests</h1>
<p>Some tests use random numbers as part of the test. In some cases a test failure may occur for some random numbers, but not for others. The seed used for the rand number generator can be set via the <code>OPENSSL_TEST_RAND_SEED</code> environment variable. It can also be set via the <code>OPENSSL_TEST_RAND_ORDER</code> environment variable which additionally randomises the order tests are run in (see below).</p>
<p>When a test fails the test harness will display the seed used during the test (displaying either the <code>OPENSSL_TEST_RAND_SEED</code> or <code>OPENSSL_TEST_RAND_ORDER</code> environment variable value that must be used to recreate the results), e.g. </p><pre class="fragment">$ make OPENSSL_TEST_RAND_SEED=42 test
</pre> <h1><a class="anchor" id="autotoc_md992"></a>
Randomisation of Test Ordering</h1>
<p>By default, the test harness will execute tests in the order they were added. By setting the <code>OPENSSL_TEST_RAND_ORDER</code> environment variable to zero, the test ordering will be randomised. This additionally seeds the random number generator used within the tests as described in the section above. If a randomly ordered test fails, the seed value used will be reported. Setting the <code>OPENSSL_TEST_RAND_ORDER</code> environment variable to this value will rerun the tests in the same order and will also seed the test random number generator. This assures repeatability of randomly ordered test runs. This repeatability is independent of the operating system, processor or platform used.</p>
<p>To randomise the test ordering: </p><pre class="fragment">$ make OPENSSL_TEST_RAND_ORDER=0 test
</pre><p> To run the tests using the order defined by the random seed <code>42</code>: </p><pre class="fragment">$ make OPENSSL_TEST_RAND_ORDER=42 test
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
